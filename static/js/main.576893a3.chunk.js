(this["webpackJsonpcompass-web"]=this["webpackJsonpcompass-web"]||[]).push([[0],{178:function(e,t,n){"use strict";n.r(t);var o,a=n(0),r=n.n(a),i=n(43),c=n.n(i),s=n(9),l=n(192),u=n(17),d=n(251),j=n(252),h=n(243),b=n(253),g=n(3),p=n(4),f=n(235),O=n(33),m=n(28),x=n(57),v=n(129),C=n.n(v),y=n(2),S=Object(p.a)(f.a)((function(e){var t,n=e.theme;return t={flexDirection:"row",borderRadius:50,backgroundColor:Object(O.a)(n.palette.common.white,.15),"&:hover":{backgroundColor:Object(O.a)(n.palette.common.white,.25)},marginLeft:0,width:"100%"},Object(g.a)(t,n.breakpoints.up("sm"),{marginLeft:n.spacing(1),width:"auto"}),Object(g.a)(t,"& .MuiButtonBase-root",{opacity:.5}),Object(g.a)(t,"&:hover .MuiButtonBase-root, &.Mui-focused .MuiButtonBase-root",{opacity:1}),t})),k=Object(p.a)(m.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(g.a)({padding:t.spacing(1,0,1,2),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"15ch","&:focus":{width:"20ch"}})}})),w=function(e){var t=e.placeholder,n=e.onSearchSubmit,o=Object(a.useState)(""),r=Object(s.a)(o,2),i=r[0],c=r[1],l=Object(a.useCallback)((function(){return n(i)}),[i,n]);return Object(y.jsxs)(S,{children:[Object(y.jsx)(k,{placeholder:t,value:i,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&l()}}),Object(y.jsx)(x.a,{onClick:l,children:Object(y.jsx)(C.a,{})})]})},I=n(130),M=n.n(I),P=function(e){var t=e.selectedChainId,n=e.chains,o=e.onChainChanged,a=e.onSearchSubmit,r=[{id:"all",name:"All"}].concat(Object(u.a)(n));return Object(y.jsx)(l.a,{sx:{flexGrow:1},children:Object(y.jsx)(d.a,{position:"static",color:"transparent",sx:{boxShadow:"revert"},children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)(M.a,{sx:{fontSize:50}}),Object(y.jsx)(l.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",sx:{marginLeft:16,marginRight:16},children:Array.isArray(r)&&r.length>1?Object(y.jsx)(h.a,{value:t||"all",onChange:function(e,t){return o("all"===t?"":t)},children:r.map((function(e){return Object(y.jsx)(b.a,{label:e.name,value:e.id},e.id)}))}):null}),Object(y.jsx)(w,{placeholder:"Search Protocols",onSearchSubmit:a}),Object(y.jsx)(l.a,{marginRight:8})]})})})},F=n(254),L=n(247),D=n(255),z=n(84),G=n(111),T=n(98),A=n(42),R=n(193),B=n(113),H=n(258),E=n(259),N=n(110),q=n(29),Q=n.n(q),W=n(131),K=n(27),U=function(){return Object(K.d)()},_=K.e,J=n(14),V="messageBar",Y=Object(J.d)({name:V,initialState:{message:"",severity:"info",status:"close"},reducers:{show:function(e,t){Object.assign(e,{status:"open",message:t.payload.message,severity:t.payload.severity||"info"})},hide:function(e){Object.assign(e,{status:"close"})}},extraReducers:function(e){e.addMatcher((function(e){return e.type.endsWith("/rejected")&&"object"===typeof e.error}),(function(e,t){console.error("Got error action: ",t);var n=t.error.message;n&&Object.assign(e,{status:"open",message:n,severity:"error"})}))}}),$=Y.reducer,X=Y.actions,Z=X.show,ee=X.hide,te=(o=V,function(e){return e[o]}),ne=function(e){var t=e.content,n=function(){var e=U();return Object(a.useMemo)((function(){return{show:function(t,n){return e(Z({message:t,severity:n}))},hide:function(){return e(ee())}}}),[e])}(),o=Object(a.useCallback)(Object(W.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:n.show("Copy to clipboard"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error in write text to clipboard. content: ".concat(t,", error: "),e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[n,t]);return Object(y.jsx)(R.a,{variant:"inherit",onClick:o,children:t})},oe=function(e){var t=e.onFilterChanged,n=Object(a.useState)("all"),o=Object(s.a)(n,2),r=o[0],i=o[1],c=Object(a.useCallback)((function(e){i(e),t("investTokenType","all"===e?"":e)}),[i]);return Object(y.jsxs)(L.a,{exclusive:!0,value:r,onChange:function(e,t){return c(t)},children:[Object(y.jsx)(D.a,{value:"all",children:"All"}),Object(y.jsx)(D.a,{value:"single",children:"Single Token"}),Object(y.jsx)(D.a,{value:"multi",children:"Multi Token"})]})},ae=function(e){var t=e.label,n=e.items,o=e.onItemSelected,r="placeholder";n=[{id:r,name:t}].concat(Object(u.a)(n));var i=Object(a.useState)(""),c=Object(s.a)(i,2),l=c[0],d=c[1],j=Object(a.useCallback)((function(e){d(e=e===r?"":e),o(e)}),[d,o]);return Object(y.jsxs)(z.a,{children:[Object(y.jsx)(G.a,{children:t}),Object(y.jsx)(T.a,{value:l,label:t,onChange:function(e){return j(e.target.value)},sx:{minWidth:120},children:n.map((function(e){return Object(y.jsx)(A.a,{value:e.id,sx:{fontStyle:e.id===r?"italic":"inherit"},children:e.name},e.id)}))})]})},re=function(e){var t=e.tokens,n=e.tags,o=e.protocols,r=e.onFilterChanged,i=Object(a.useState)(""),c=Object(s.a)(i,2),u=c[0],d=c[1],j=Object(a.useMemo)((function(){return o.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){n=n.toLowerCase(),e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[o]),h=Object(a.useMemo)((function(){if(u&&o){var e=j[u];return o.filter((function(t){return e.has(t.id)}))}return o}),[u,j,o]);return Object(y.jsxs)(f.a,{direction:"row",spacing:2,children:[Object(y.jsx)(l.a,{display:"none",children:Object(y.jsx)(ae,{label:"Token",items:t,onItemSelected:function(e){return r("token",e)}})}),Object(y.jsx)(ae,{label:"Category",items:n,onItemSelected:function(e){d(e),r("tag",e)}}),Object(y.jsx)(ae,{label:"Protocol",items:h,onItemSelected:function(e){return r("protocol",e)}},"Protocols<".concat(u,">"))]})},ie=function(e){var t=e.tokens,n=e.tags,o=e.protocols,a=e.onFilterChanged;return Object(y.jsxs)(f.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(y.jsx)(oe,{onFilterChanged:a}),Object(y.jsx)(re,{tokens:t,tags:n,protocols:o,onFilterChanged:a})]})},ce=[{field:"id",hide:!0},{field:"pool",headerName:"POOL",flex:4,sortable:!1,renderCell:function(e){var t=e.value||{},n=t.pool,o=t.protocol,a=t.chain;return Object(y.jsxs)(f.a,{"aria-label":"pool-updated-at-".concat(n.createdAt),children:[Object(y.jsx)(R.a,{fontSize:16,children:(null===n||void 0===n?void 0:n.name)||"---"}),Object(y.jsx)(l.a,{marginTop:"3px"}),Object(y.jsxs)(f.a,{direction:"row",alignItems:"center",children:[Object(y.jsx)(R.a,{fontSize:14,children:(null===o||void 0===o?void 0:o.name)||"---"}),Object(y.jsx)(l.a,{marginLeft:1}),(null===a||void 0===a?void 0:a.icon)&&Object(y.jsx)("img",{src:a.icon,alt:a.name,style:{width:12,height:12}})]}),Object(y.jsx)(l.a,{marginTop:"3px"}),Array.isArray(null===o||void 0===o?void 0:o.tags)&&o.tags.length>0&&Object(y.jsx)(R.a,{fontSize:12,fontWeight:"bold",sx:{color:"text.secondary"},children:o.tags[0]})]})}},{field:"invest_token",headerName:"Invest Token",flex:4,sortable:!1,renderCell:function(e){var t=e.value||[];return Object(y.jsx)(f.a,{direction:"row",children:t&&t.map((function(e){var t=e.address,n=e.symbol;return Object(y.jsx)(B.a,{title:Object(y.jsx)(ne,{content:t}),children:Object(y.jsx)(R.a,{color:"inherit",children:n||"".concat(t.slice(0,4),"...").concat(t.slice(-4))})},t)}))})}},{field:"tvl",headerName:"TVL",flex:2,type:"number",renderCell:function(e){var t=e.value||0,n="number"===typeof t&&Number.isFinite(t)&&t>=0?t:0;return Object(y.jsxs)(R.a,{variant:"inherit",children:["$",n.toFixed(0).toLocaleString()]})}},{field:"apy",headerName:"APY",flex:2,headerAlign:"right",align:"right",cellClassName:"StyledDataGrid-cell-apy"},{field:"link",headerName:"LINK",flex:3,sortable:!1,headerAlign:"right",align:"right",renderCell:function(e){var t=e.value||{link:"#",name:"---"},n=t.link,o=t.name;return Object(y.jsx)(H.a,{href:n,target:"_blank",underline:"none",children:o})}}],se=function(){return Object(y.jsx)(N.b,{children:Object(y.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},children:Object(y.jsx)(E.a,{})})})},le=Object(p.a)(N.a)((function(){return{minHeight:600,border:"revert","& .MuiDataGrid-cell, & .MuiDataGrid-columnHeaders":{border:"revert"},"& .MuiDataGrid-cell:focus, & .MuiDataGrid-columnHeader:focus, .MuiDataGrid-columnHeader:focus-within":{outline:"revert"},"& .MuiDataGrid-columnSeparator":{display:"none"},"& .MuiDataGrid-columnHeader--alignRight .MuiDataGrid-columnHeaderTitleContainer":{flexDirection:"row",justifyContent:"flex-end"},"& .MuiDataGrid-columnHeader .MuiDataGrid-iconButtonContainer, & .MuiDataGrid-columnHeader--sorted .MuiDataGrid-iconButtonContainer":{width:"auto",visibility:"visible"},"& .MuiDataGrid-columnHeader:not(.MuiDataGrid-columnHeader--sorted) .MuiDataGrid-sortIcon":{opacity:"0.1"},"& .StyledDataGrid-cell-apy":{color:"#56F00DD9"}}})),ue=function(e){var t=e.pageIndex,n=e.pageSize,o=e.onPageSizeChanged,r=e.onPageIndexChange,i=e.isFetchingPools,c=e.poolsResult,l=e.onSortChanged,u=e.chainsLookup,d=e.protocolsLookup,j=Object(a.useMemo)((function(){return((null===c||void 0===c?void 0:c.data)||[]).map((function(e){return{id:"".concat(e.protocolId,"/").concat(e.chainId,"/").concat(e.name),pool:{pool:e,chain:u[e.chainId],protocol:d[e.protocolId]},invest_token:e.investTokens,tvl:e.tvl,apy:"".concat((100*Number(e.apy)).toFixed(2),"%"),link:d[e.protocolId]}}))}),[c,u,d]);return Object(y.jsx)(le,{autoHeight:!0,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableDensitySelector:!0,disableSelectionOnClick:!0,density:"comfortable",rowHeight:65,showCellRightBorder:!1,showColumnRightBorder:!1,components:{LoadingOverlay:se},sortingMode:"server",onSortModelChange:function(e){var t=Object(s.a)(e,1)[0];return l((null===t||void 0===t?void 0:t.field)||"","string"===typeof(null===t||void 0===t?void 0:t.sort)?t.sort:"")},pagination:!0,paginationMode:"server",page:t,onPageChange:function(e){return r(e)},pageSize:n,onPageSizeChange:o,rowsPerPageOptions:[15,35,50],rowCount:(null===c||void 0===c?void 0:c.total)||0,initialState:{sorting:{sortModel:[{field:"apy",sort:"desc"}]}},loading:i,columns:ce,rows:j})},de=function(e){var t=e.chainsLookup,n=e.protocolsLookup,o=e.selectedChainId,a=e.tokens,r=e.tags,i=e.protocols,c=e.onFilterChanged,s=e.onSortChanged,u=e.isFetchingPools,d=e.poolsResult,j=e.pageIndex,h=e.pageSize,b=e.onPageSizeChanged,g=e.onPageIndexChange;return Object(y.jsxs)(F.a,{maxWidth:"lg",children:[Object(y.jsx)(ie,{tokens:a,tags:r,protocols:i,onFilterChanged:c},"filter-".concat(o)),Object(y.jsx)(l.a,{marginTop:8}),Object(y.jsx)(ue,{pageIndex:j,pageSize:h,onPageSizeChanged:b,onPageIndexChange:g,isFetchingPools:u,poolsResult:d,onSortChanged:s,chainsLookup:t,protocolsLookup:n})]})},je=n(134),he=n(36),be="pumpkinApi",ge=function(e){return e.result},pe=Object(je.a)({reducerPath:be,baseQuery:Object(he.d)({baseUrl:"https://552vv7k0hf.execute-api.us-east-1.amazonaws.com/dev"}),endpoints:function(e){return{ping:e.query({query:function(){return"ping"},transformResponse:ge}),matrix:e.query({query:function(){return"matrix"},transformResponse:ge}),pools:e.query({query:function(e){var t="pools";"object"===typeof e&&(Array.isArray(e.protocolId)&&(e=Object.assign({},e,{protocolId:e.protocolId.join(",")})),t+="?"+new URLSearchParams(e).toString());return t},transformResponse:ge})}}}),fe=pe.reducer,Oe=pe.middleware,me=(pe.usePingQuery,pe.useMatrixQuery),xe=pe.useLazyPoolsQuery,ve={pageIndex:0,pageSize:15,apyAsc:!1},Ce=function(){var e=function(){var e=me(void 0).data||{},t=e.chains,n=e.tags,o=e.protocols,r=Object(a.useMemo)((function(){return[Object.fromEntries((t||[]).map((function(e){return[e.id,e]}))),Object.fromEntries((o||[]).map((function(e){return[e.id,e]})))]}),[t,o]),i=Object(s.a)(r,2),c=i[0],l=i[1],u=Object(a.useState)(ve),d=Object(s.a)(u,2),j=d[0],h=d[1],b=Object(a.useCallback)((function(e){h((function(t){var n=Object.assign({},t,e);return Object.fromEntries(Object.entries(n).filter((function(e){var t=Object(s.a)(e,2)[1];return!("undefined"===typeof t||"string"===typeof t&&!t)})))}))}),[h]),g=xe(),p=Object(s.a)(g,2),f=p[0],O=p[1],m=O.data,x=O.isFetching;Object(a.useEffect)((function(){f(j)}),[j]);var v=Object(a.useState)(""),C=Object(s.a)(v,2),y=C[0],S=C[1],k=Object(a.useCallback)((function(e){S(e),b({chainId:e,protocolId:""})}),[S,b]),w=Object(a.useMemo)((function(){return(o||[]).reduce((function(e,t){var n;return null===(n=t.chainIds)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[o]),I=Object(a.useMemo)((function(){var e=o||[];if(y){var t=w[y];t&&(e=e.filter((function(e){return t.has(e.id)})))}var a=e.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){n=n.toLowerCase(),e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{}),r=new Set(Object.keys(a));return[e,(n||[]).filter((function(e){return r.has(e.id)})),a]}),[y,w,o,n]),M=Object(s.a)(I,3),P=M[0],F=M[1],L=M[2],D=Object(a.useCallback)((function(e,t){if("tag"===e){var n=Array.from(L[t]||[]);b({protocolId:n})}else"protocol"===e?b({protocolId:t}):"investTokenType"===e&&b({investTokenType:t})}),[b,L]),z=Object(a.useCallback)((function(e,t){var n=void 0,o=void 0;"apy"===e?n="asc"===t:"tvl"===e&&(o="asc"===t),b({apyAsc:n,tvlAsc:o})}),[b]),G=Object(a.useCallback)((function(e){b({pageIndex:e})}),[b]),T=Object(a.useCallback)((function(e){b({pageSize:e})}),[b]),A=Object(a.useCallback)((function(e){e=(e=e||"").toLowerCase(),b({protocolId:e})}),[b]);return{chainsLookup:c,protocolsLookup:l,selectedChainId:y,chains:t||[],tokens:[],tags:F,protocols:P,isFetchingPools:x,poolsResult:m,onChainChanged:k,onFilterChanged:D,onSortChanged:z,pageIndex:(null===j||void 0===j?void 0:j.pageIndex)||0,pageSize:(null===j||void 0===j?void 0:j.pageSize)||25,onPageSizeChanged:T,onPageIndexChanged:G,onSearchSubmit:A}}(),t=e.chainsLookup,n=e.protocolsLookup,o=e.selectedChainId,r=e.chains,i=e.tokens,c=e.tags,u=e.protocols,d=e.isFetchingPools,j=e.poolsResult,h=e.onChainChanged,b=e.onFilterChanged,g=e.onSortChanged,p=e.pageIndex,f=e.pageSize,O=e.onPageSizeChanged,m=e.onPageIndexChanged,x=e.onSearchSubmit;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(P,{selectedChainId:o,chains:r||[],onChainChanged:h,onSearchSubmit:x}),Object(y.jsx)(l.a,{marginTop:20}),Object(y.jsx)(de,{chainsLookup:t,protocolsLookup:n,selectedChainId:o,tokens:i,tags:c,protocols:u,isFetchingPools:d,poolsResult:j,onFilterChanged:b,onSortChanged:g,pageIndex:p,pageSize:f,onPageIndexChange:m,onPageSizeChanged:O}),Object(y.jsx)(l.a,{marginBottom:16})]})},ye=n(246),Se=n(244),ke=Object(p.a)(l.a)({display:"flex"}),we=(Object(p.a)(ke)({flexDirection:"column"}),Object(p.a)(ke)({flexDirection:"row"})),Ie=(Object(p.a)(ke)({justifyContent:"center",alignItems:"center"}),Object(p.a)("div")((function(e){return{width:e.width,height:e.height}}))),Me=n(260),Pe=n(240),Fe=n(261),Le=n(262),De=n(263),ze=n(62),Ge=function(e){var t=e.title,n=e.value,o=e.stripThreshold,r=void 0===o?50:o,i=Object(a.useState)(!1),c=Object(s.a)(i,2),l=c[0],u=c[1],d=n&&n.length>=r,j=d?(null===n||void 0===n?void 0:n.slice(0,r))+"...":n;return Object(y.jsx)(y.Fragment,{children:n&&Object(y.jsxs)(we,{children:[j,d&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ie,{width:3}),Object(y.jsx)(H.a,{component:"button",onClick:function(){return u(!0)},color:"inherit",underline:"always","aria-label":n,children:"more"}),Object(y.jsxs)(Me.a,{scroll:"paper",open:l,onClose:function(){return u(!1)},children:[Object(y.jsx)(Pe.a,{children:t}),Object(y.jsx)(Fe.a,{dividers:!0,children:Object(y.jsx)(Le.a,{children:n})}),Object(y.jsx)(De.a,{children:Object(y.jsx)(ze.a,{autoFocus:!0,onClick:function(){return u(!1)},children:"OK"})})]})]})]})})},Te=function(){var e=U(),t=_(te),n=t.status,o=t.message,a=t.severity;return Object(y.jsx)(ye.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:"open"===n,autoHideDuration:3e3,onClose:function(){return e(ee())},children:Object(y.jsx)(Se.a,{severity:a,children:Object(y.jsx)(Ge,{title:(null===a||void 0===a?void 0:a.toUpperCase())||"",value:o})})})};var Ae,Re=function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ce,{}),Object(y.jsx)(Te,{})]})},Be=n(135),He=n(250),Ee=n(241),Ne=Object(J.a)({reducer:(Ae={},Object(g.a)(Ae,be,fe),Object(g.a)(Ae,V,$),Ae),middleware:function(e){return[].concat(Object(u.a)(e()),[Oe])}});Object(he.e)(Ne.dispatch);var qe=Object(Be.a)({palette:{mode:"dark",primary:{main:"#1890FF"}}});c.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(K.a,{store:Ne,children:Object(y.jsxs)(He.a,{theme:qe,children:[Object(y.jsx)(Ee.a,{}),Object(y.jsx)(Re,{})]})})}),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.576893a3.chunk.js.map