(this["webpackJsonpcompass-web"]=this["webpackJsonpcompass-web"]||[]).push([[0],{171:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(42),i=n.n(r),c=n(8),l=n(185),s=n(16),u=n(239),d=n(240),h=n(235),j=n(241),b=n(3),g=n(5),p=n(229),f=n(30),O=n(25),m=n(55),x=n(125),v=n.n(x),C=n(2),S=Object(g.a)(p.a)((function(e){var t,n=e.theme;return t={flexDirection:"row",borderRadius:50,backgroundColor:Object(f.a)(n.palette.common.white,.15),"&:hover":{backgroundColor:Object(f.a)(n.palette.common.white,.25)},marginLeft:0,width:"100%"},Object(b.a)(t,n.breakpoints.up("sm"),{marginLeft:n.spacing(1),width:"auto"}),Object(b.a)(t,"& .MuiButtonBase-root",{opacity:.5}),Object(b.a)(t,"&:hover .MuiButtonBase-root, &.Mui-focused .MuiButtonBase-root",{opacity:1}),t})),k=Object(g.a)(O.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(b.a)({padding:t.spacing(1,0,1,2),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),y=function(e){var t=e.placeholder,n=e.onSearchSubmit,a=Object(o.useState)(""),r=Object(c.a)(a,2),i=r[0],l=r[1],s=Object(o.useCallback)((function(){return n(i)}),[i,n]);return Object(C.jsxs)(S,{children:[Object(C.jsx)(k,{placeholder:t,value:i,onChange:function(e){return l(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&s()}}),Object(C.jsx)(m.a,{onClick:s,children:Object(C.jsx)(v.a,{})})]})},I=n(126),w=n.n(I),M=function(e){var t=e.selectedChainId,n=e.chains,o=e.onChainChanged,a=e.onSearchSubmit,r=[{id:"all",name:"All"}].concat(Object(s.a)(n));return Object(C.jsx)(l.a,{sx:{flexGrow:1},children:Object(C.jsx)(u.a,{position:"static",color:"transparent",sx:{boxShadow:"revert"},children:Object(C.jsxs)(d.a,{children:[Object(C.jsx)(w.a,{sx:{fontSize:50}}),Object(C.jsx)(l.a,{marginLeft:16}),Array.isArray(r)&&r.length>1?Object(C.jsx)(h.a,{variant:"fullWidth",value:t||"all",onChange:function(e,t){return o("all"===t?"":t)},children:r.map((function(e){return Object(C.jsx)(j.a,{label:e.name,value:e.id},e.id)}))}):null,Object(C.jsx)(l.a,{flexGrow:1}),Object(C.jsx)(y,{placeholder:"Search Protocols",onSearchSubmit:a}),Object(C.jsx)(l.a,{marginRight:8})]})})})},P=n(242),L=n(236),z=n(243),F=n(83),D=n(107),G=n(95),A=n(41),R=n(246),B=n(247),H=n(248),T=n(106),E=function(e){var t=e.onFilterChanged,n=Object(o.useState)("all"),a=Object(c.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(e){i(e),t("singleTokenPool",String("single"===e))}),[i]);return Object(C.jsxs)(L.a,{exclusive:!0,value:r,onChange:function(e,t){return l(t)},children:[Object(C.jsx)(z.a,{value:"all",children:"All"}),Object(C.jsx)(z.a,{value:"single",children:"Single Token"}),Object(C.jsx)(z.a,{value:"multi",children:"Multi Token"})]})},N=function(e){var t=e.label,n=e.items,a=e.onItemSelected,r="placeholder";n=[{id:r,name:t}].concat(Object(s.a)(n));var i=Object(o.useState)(""),l=Object(c.a)(i,2),u=l[0],d=l[1],h=Object(o.useCallback)((function(e){d(e=e===r?"":e),a(e)}),[d,a]);return Object(C.jsxs)(F.a,{children:[Object(C.jsx)(D.a,{children:t}),Object(C.jsx)(G.a,{value:u,label:t,onChange:function(e){return h(e.target.value)},sx:{minWidth:120},children:n.map((function(e){return Object(C.jsx)(A.a,{value:e.id,sx:{fontStyle:e.id===r?"italic":"inherit"},children:e.name},e.id)}))})]})},q=function(e){var t=e.tokens,n=e.tags,a=e.protocols,r=e.onFilterChanged,i=Object(o.useState)(""),l=Object(c.a)(i,2),s=l[0],u=l[1],d=Object(o.useMemo)((function(){return a.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[a]),h=Object(o.useMemo)((function(){if(s&&a){var e=d[s];return a.filter((function(t){return e.has(t.id)}))}return a}),[s,d,a]);return Object(C.jsxs)(p.a,{direction:"row",spacing:2,children:[Object(C.jsx)(N,{label:"Token",items:t,onItemSelected:function(e){return r("token",e)}}),Object(C.jsx)(N,{label:"Category",items:n,onItemSelected:function(e){u(e),r("tag",e)}}),Object(C.jsx)(N,{label:"Protocol",items:h,onItemSelected:function(e){return r("protocol",e)}},"Protocols<".concat(s,">"))]})},W=function(e){var t=e.tokens,n=e.tags,o=e.protocols,a=e.onFilterChanged;return Object(C.jsxs)(p.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(C.jsx)(E,{onFilterChanged:a}),Object(C.jsx)(q,{tokens:t,tags:n,protocols:o,onFilterChanged:a})]})},Q=[{field:"id",hide:!0},{field:"pool",headerName:"POOL",flex:3,sortable:!1,renderCell:function(e){var t=e.value||{},n=t.pool,o=t.protocol,a=t.chain;return Object(C.jsxs)(p.a,{children:[Object(C.jsx)(R.a,{fontSize:16,fontWeight:"bold",children:(null===n||void 0===n?void 0:n.name)||"---"}),Object(C.jsx)(l.a,{marginTop:"3px"}),Object(C.jsxs)(p.a,{direction:"row",alignItems:"center",children:[Object(C.jsx)(R.a,{fontSize:14,fontWeight:"bold",children:(null===o||void 0===o?void 0:o.name)||"---"}),Object(C.jsx)(l.a,{marginLeft:1}),(null===a||void 0===a?void 0:a.icon)&&Object(C.jsx)("img",{src:a.icon,alt:a.name,style:{width:12,height:12}})]}),Object(C.jsx)(l.a,{marginTop:"3px"}),Array.isArray(null===o||void 0===o?void 0:o.tags)&&o.tags.length>0&&Object(C.jsx)(R.a,{fontSize:12,fontWeight:"bold",sx:{color:"text.secondary"},children:o.tags[0]})]})}},{field:"tvl",headerName:"TVL",flex:2,type:"number"},{field:"apr",headerName:"APR",flex:2,headerAlign:"right",align:"right",cellClassName:"StyledDataGrid-cell-apr"},{field:"link",headerName:"LINK",flex:3,sortable:!1,headerAlign:"right",align:"right",renderCell:function(e){var t=e.value||{link:"#",name:"---"},n=t.link,o=t.name;return Object(C.jsx)(B.a,{href:n,target:"_blank",underline:"none",children:o})}}],J=function(){return Object(C.jsx)(T.b,{children:Object(C.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},children:Object(C.jsx)(H.a,{})})})},K=Object(g.a)(T.a)((function(){return{minHeight:600,border:"revert","& .MuiDataGrid-cell, & .MuiDataGrid-columnHeaders":{border:"revert"},"& .MuiDataGrid-cell:focus, & .MuiDataGrid-columnHeader:focus, .MuiDataGrid-columnHeader:focus-within":{outline:"revert"},"& .MuiDataGrid-columnSeparator":{display:"none"},"& .MuiDataGrid-columnHeader--alignRight .MuiDataGrid-columnHeaderTitleContainer":{flexDirection:"row",justifyContent:"flex-end"},"& .MuiDataGrid-columnHeader .MuiDataGrid-iconButtonContainer, & .MuiDataGrid-columnHeader--sorted .MuiDataGrid-iconButtonContainer":{width:"auto",visibility:"visible"},"& .MuiDataGrid-columnHeader:not(.MuiDataGrid-columnHeader--sorted) .MuiDataGrid-sortIcon":{opacity:"0.1"},"& .StyledDataGrid-cell-apr":{color:"#56F00DD9"}}})),U=function(e){var t=e.pageIndex,n=e.pageSize,a=e.onPageSizeChanged,r=e.onPageIndexChange,i=e.isFetchingPools,l=e.poolsResult,s=e.onSortChanged,u=e.chainsLookup,d=e.protocolsLookup,h=Object(o.useMemo)((function(){return((null===l||void 0===l?void 0:l.data)||[]).map((function(e){return{id:"".concat(e.protocolId,"/").concat(e.chainId,"/").concat(e.name),pool:{pool:e,chain:u[e.chainId],protocol:d[e.protocolId]},tvl:e.tvl,apr:"".concat((100*Number(e.apr)).toFixed(2),"%"),link:d[e.protocolId]}}))}),[l,u,d]);return Object(C.jsx)(K,{autoHeight:!0,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableDensitySelector:!0,disableSelectionOnClick:!0,density:"comfortable",rowHeight:65,showCellRightBorder:!1,showColumnRightBorder:!1,components:{LoadingOverlay:J},sortingMode:"server",onSortModelChange:function(e){var t=Object(c.a)(e,1)[0];return s((null===t||void 0===t?void 0:t.field)||"","string"===typeof(null===t||void 0===t?void 0:t.sort)?t.sort:"")},pagination:!0,paginationMode:"server",page:t,onPageChange:function(e){return r(e)},pageSize:n,onPageSizeChange:a,rowsPerPageOptions:[15,35,50],rowCount:(null===l||void 0===l?void 0:l.total)||0,initialState:{sorting:{sortModel:[{field:"apr",sort:"desc"}]}},loading:i,columns:Q,rows:h})},V=function(e){var t=e.chainsLookup,n=e.protocolsLookup,o=e.selectedChainId,a=e.tokens,r=e.tags,i=e.protocols,c=e.onFilterChanged,s=e.onSortChanged,u=e.isFetchingPools,d=e.poolsResult,h=e.pageIndex,j=e.pageSize,b=e.onPageSizeChanged,g=e.onPageIndexChange;return Object(C.jsxs)(P.a,{maxWidth:"lg",children:[Object(C.jsx)(W,{tokens:a,tags:r,protocols:i,onFilterChanged:c},"filter-".concat(o)),Object(C.jsx)(l.a,{marginTop:8}),Object(C.jsx)(U,{pageIndex:h,pageSize:j,onPageSizeChanged:b,onPageIndexChange:g,isFetchingPools:u,poolsResult:d,onSortChanged:s,chainsLookup:t,protocolsLookup:n})]})},_=n(128),X=n(33),Y="pumpkinApi",Z=function(e){return e.result},$=Object(_.a)({reducerPath:Y,baseQuery:Object(X.d)({baseUrl:"https://552vv7k0hf.execute-api.us-east-1.amazonaws.com/dev"}),endpoints:function(e){return{ping:e.query({query:function(){return"ping"},transformResponse:Z}),matrix:e.query({query:function(){return"matrix"},transformResponse:Z}),pools:e.query({query:function(e){var t="pools";"object"===typeof e&&(Array.isArray(e.protocolId)&&(e=Object.assign({},e,{protocolId:e.protocolId.join(",")})),t+="?"+new URLSearchParams(e).toString());return t},transformResponse:Z})}}}),ee=$.reducer,te=$.middleware,ne=($.usePingQuery,$.useMatrixQuery),oe=$.useLazyPoolsQuery,ae={pageIndex:0,pageSize:15,aprAsc:!1},re=function(){var e=function(){var e=ne(void 0).data||{},t=e.chains,n=e.tags,a=e.protocols,r=Object(o.useMemo)((function(){return[Object.fromEntries((t||[]).map((function(e){return[e.id,e]}))),Object.fromEntries((a||[]).map((function(e){return[e.id,e]})))]}),[t,a]),i=Object(c.a)(r,2),l=i[0],s=i[1],u=Object(o.useState)(ae),d=Object(c.a)(u,2),h=d[0],j=d[1],b=Object(o.useCallback)((function(e){j((function(t){var n=Object.assign({},t,e);return Object.fromEntries(Object.entries(n).filter((function(e){var t=Object(c.a)(e,2)[1];return!("undefined"===typeof t||"string"===typeof t&&!t)})))}))}),[j]),g=oe(),p=Object(c.a)(g,2),f=p[0],O=p[1],m=O.data,x=O.isFetching;Object(o.useEffect)((function(){f(h)}),[h]);var v=Object(o.useState)(""),C=Object(c.a)(v,2),S=C[0],k=C[1],y=Object(o.useCallback)((function(e){k(e),b({chainId:e,protocolId:""})}),[k,b]),I=Object(o.useMemo)((function(){return(a||[]).reduce((function(e,t){var n;return null===(n=t.chainIds)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[a]),w=Object(o.useMemo)((function(){var e=a||[];if(S){var t=I[S];t&&(e=e.filter((function(e){return t.has(e.id)})))}var o=e.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){n=n.toLowerCase(),e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{}),r=new Set(Object.keys(o));return[e,(n||[]).filter((function(e){return r.has(e.id)})),o]}),[S,I,a,n]),M=Object(c.a)(w,3),P=M[0],L=M[1],z=M[2],F=Object(o.useCallback)((function(e,t){if("tag"===e){var n=Array.from(z[t]||[]);b({protocolId:n})}else"protocol"===e&&b({protocolId:t})}),[b,z]),D=Object(o.useCallback)((function(e,t){var n=void 0,o=void 0;"apr"===e?n="asc"===t:"tvl"===e&&(o="asc"===t),b({aprAsc:n,tvlAsc:o})}),[b]),G=Object(o.useCallback)((function(e){b({pageIndex:e})}),[b]),A=Object(o.useCallback)((function(e){b({pageSize:e})}),[b]),R=Object(o.useCallback)((function(e){e=(e=e||"").toLowerCase(),b({protocolId:e})}),[b]);return{chainsLookup:l,protocolsLookup:s,selectedChainId:S,chains:t||[],tokens:[],tags:L,protocols:P,isFetchingPools:x,poolsResult:m,onChainChanged:y,onFilterChanged:F,onSortChanged:D,pageIndex:(null===h||void 0===h?void 0:h.pageIndex)||0,pageSize:(null===h||void 0===h?void 0:h.pageSize)||25,onPageSizeChanged:A,onPageIndexChanged:G,onSearchSubmit:R}}(),t=e.chainsLookup,n=e.protocolsLookup,a=e.selectedChainId,r=e.chains,i=e.tokens,s=e.tags,u=e.protocols,d=e.isFetchingPools,h=e.poolsResult,j=e.onChainChanged,b=e.onFilterChanged,g=e.onSortChanged,p=e.pageIndex,f=e.pageSize,O=e.onPageSizeChanged,m=e.onPageIndexChanged,x=e.onSearchSubmit;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M,{selectedChainId:a,chains:r||[],onChainChanged:j,onSearchSubmit:x}),Object(C.jsx)(l.a,{marginTop:16}),Object(C.jsx)(V,{chainsLookup:t,protocolsLookup:n,selectedChainId:a,tokens:i,tags:s,protocols:u,isFetchingPools:d,poolsResult:h,onFilterChanged:b,onSortChanged:g,pageIndex:p,pageSize:f,onPageIndexChange:m,onPageSizeChanged:O})]})};var ie=function(){return Object(C.jsx)(re,{})},ce=n(35),le=n(130),se=n(238),ue=n(233),de=n(14),he=Object(de.a)({reducer:Object(b.a)({},Y,ee),middleware:function(e){return[].concat(Object(s.a)(e()),[te])}});Object(X.e)(he.dispatch);var je=Object(le.a)({palette:{mode:"dark",primary:{main:"#1890FF"}}});i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(ce.a,{store:he,children:Object(C.jsxs)(se.a,{theme:je,children:[Object(C.jsx)(ue.a,{}),Object(C.jsx)(ie,{})]})})}),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.060035fa.chunk.js.map