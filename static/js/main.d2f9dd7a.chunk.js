(this["webpackJsonpcompass-web"]=this["webpackJsonpcompass-web"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(42),r=n.n(i),c=n(8),l=n(185),s=n(16),d=n(239),u=n(240),g=n(235),h=n(241),j=n(3),b=n(5),p=n(30),f=n(25),O=n(125),m=n.n(O),x=n(2),v=Object(b.a)("div")((function(e){var t=e.theme;return Object(j.a)({position:"relative",borderRadius:50,backgroundColor:Object(p.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(p.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})})),C=Object(b.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),S=Object(b.a)(f.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(j.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),y=function(){return Object(x.jsxs)(v,{children:[Object(x.jsx)(C,{children:Object(x.jsx)(m.a,{})}),Object(x.jsx)(S,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})},I=n(126),w=n.n(I),k=function(e){var t=e.selectedChainId,n=e.chains,a=e.onChainChanged,o=[{id:"all",name:"All"}].concat(Object(s.a)(n));return Object(x.jsx)(l.a,{sx:{flexGrow:1},children:Object(x.jsx)(d.a,{position:"static",color:"transparent",sx:{boxShadow:"revert"},children:Object(x.jsxs)(u.a,{children:[Object(x.jsx)(w.a,{sx:{fontSize:50}}),Object(x.jsx)(l.a,{marginLeft:16}),Array.isArray(o)&&o.length>1?Object(x.jsx)(g.a,{variant:"fullWidth",value:t||"all",onChange:function(e,t){return a("all"===t?"":t)},children:o.map((function(e){return Object(x.jsx)(h.a,{label:e.name,value:e.id},e.id)}))}):null,Object(x.jsx)(l.a,{flexGrow:1}),Object(x.jsx)(y,{}),Object(x.jsx)(l.a,{marginRight:8})]})})})},P=n(242),M=n(236),F=n(243),D=n(83),z=n(107),G=n(95),A=n(41),R=n(232),H=n(246),L=n(106),T=function(e){var t=e.onFilterChanged,n=Object(a.useState)("all"),o=Object(c.a)(n,2),i=o[0],r=o[1],l=Object(a.useCallback)((function(e){r(e),t("singleTokenPool",String("single"===e))}),[r]);return Object(x.jsxs)(M.a,{exclusive:!0,value:i,onChange:function(e,t){return l(t)},children:[Object(x.jsx)(F.a,{value:"all",children:"All"}),Object(x.jsx)(F.a,{value:"single",children:"Single Token"}),Object(x.jsx)(F.a,{value:"multi",children:"Multi Token"})]})},E=function(e){var t=e.label,n=e.items,o=e.onItemSelected,i="placeholder";n=[{id:i,name:t}].concat(Object(s.a)(n));var r=Object(a.useState)(""),l=Object(c.a)(r,2),d=l[0],u=l[1],g=Object(a.useCallback)((function(e){u(e=e===i?"":e),o(e)}),[u,o]);return Object(x.jsxs)(D.a,{children:[Object(x.jsx)(z.a,{children:t}),Object(x.jsx)(G.a,{value:d,label:t,onChange:function(e){return g(e.target.value)},sx:{minWidth:120},children:n.map((function(e){return Object(x.jsx)(A.a,{value:e.id,sx:{fontStyle:e.id===i?"italic":"inherit"},children:e.name},e.id)}))})]})},N=function(e){var t=e.tokens,n=e.tags,o=e.protocols,i=e.onFilterChanged,r=Object(a.useState)(""),l=Object(c.a)(r,2),s=l[0],d=l[1],u=Object(a.useMemo)((function(){return o.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[o]),g=Object(a.useMemo)((function(){if(s&&o){var e=u[s];return o.filter((function(t){return e.has(t.id)}))}return o}),[s,u,o]);return Object(x.jsxs)(R.a,{direction:"row",spacing:2,children:[Object(x.jsx)(E,{label:"Token",items:t,onItemSelected:function(e){return i("token",e)}}),Object(x.jsx)(E,{label:"Category",items:n,onItemSelected:function(e){d(e),i("tag",e)}}),Object(x.jsx)(E,{label:"Protocol",items:g,onItemSelected:function(e){return i("protocol",e)}},"Protocols<".concat(s,">"))]})},q=function(e){var t=e.tokens,n=e.tags,a=e.protocols,o=e.onFilterChanged;return Object(x.jsxs)(R.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(x.jsx)(T,{onFilterChanged:o}),Object(x.jsx)(N,{tokens:t,tags:n,protocols:a,onFilterChanged:o})]})},B=[{field:"id",hide:!0},{field:"pool",headerName:"POOL",flex:3,sortable:!1},{field:"apy",headerName:"APY",flex:2,headerAlign:"right",align:"right",cellClassName:"StyledDataGrid-cell-apy"},{field:"tvl",headerName:"TVL",flex:2,type:"number"},{field:"link",headerName:"LINK",flex:3,sortable:!1,headerAlign:"right",align:"right"}],Q=function(){return Object(x.jsx)(L.b,{children:Object(x.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},children:Object(x.jsx)(H.a,{})})})},W=Object(b.a)(L.a)((function(){return{minHeight:600,border:"revert","& .MuiDataGrid-cell, & .MuiDataGrid-columnHeaders":{border:"revert"},"& .MuiDataGrid-cell:focus, & .MuiDataGrid-columnHeader:focus, .MuiDataGrid-columnHeader:focus-within":{outline:"revert"},"& .MuiDataGrid-columnSeparator":{display:"none"},"& .MuiDataGrid-columnHeader--alignRight .MuiDataGrid-columnHeaderTitleContainer":{flexDirection:"row",justifyContent:"flex-end"},"& .MuiDataGrid-columnHeader .MuiDataGrid-iconButtonContainer, & .MuiDataGrid-columnHeader--sorted .MuiDataGrid-iconButtonContainer":{width:"auto",visibility:"visible"},"& .MuiDataGrid-columnHeader:not(.MuiDataGrid-columnHeader--sorted) .MuiDataGrid-sortIcon":{opacity:"0.1"},"& .StyledDataGrid-cell-apy":{color:"#56F00DD9"}}})),J=function(e){var t=e.pageIndex,n=e.pageSize,o=e.onPageSizeChanged,i=e.onPageIndexChange,r=e.isFetchingPools,l=e.poolsResult,s=e.onSortChanged,d=Object(a.useMemo)((function(){return((null===l||void 0===l?void 0:l.data)||[]).map((function(e){return{id:"".concat(e.protocolId,"/").concat(e.chainId,"/").concat(e.name),pool:e.name,tvl:e.tvl,apy:"".concat((100*Number(e.apy)).toFixed(2),"%"),link:e.protocolId}}))}),[l]);return Object(x.jsx)(W,{autoHeight:!0,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableDensitySelector:!0,disableSelectionOnClick:!0,showCellRightBorder:!1,showColumnRightBorder:!1,components:{LoadingOverlay:Q},sortingMode:"server",onSortModelChange:function(e){var t=Object(c.a)(e,1)[0];return s((null===t||void 0===t?void 0:t.field)||"","string"===typeof(null===t||void 0===t?void 0:t.sort)?t.sort:"")},pagination:!0,paginationMode:"server",page:t,onPageChange:function(e){return i(e)},pageSize:n,onPageSizeChange:o,rowsPerPageOptions:[15,35,50],rowCount:(null===l||void 0===l?void 0:l.total)||0,initialState:{sorting:{sortModel:[{field:"apy",sort:"desc"}]}},loading:r,columns:B,rows:d})},U=function(e){var t=e.selectedChainId,n=e.tokens,a=e.tags,o=e.protocols,i=e.onFilterChanged,r=e.onSortChanged,c=e.isFetchingPools,s=e.poolsResult,d=e.pageIndex,u=e.pageSize,g=e.onPageSizeChanged,h=e.onPageIndexChange;return Object(x.jsxs)(P.a,{maxWidth:"lg",children:[Object(x.jsx)(q,{tokens:n,tags:a,protocols:o,onFilterChanged:i},"filter-".concat(t)),Object(x.jsx)(l.a,{marginTop:8}),Object(x.jsx)(J,{pageIndex:d,pageSize:u,onPageSizeChanged:g,onPageIndexChange:h,isFetchingPools:c,poolsResult:s,onSortChanged:r})]})},K=n(128),V=n(33),Y="pumpkinApi",X=function(e){return e.result},Z=Object(K.a)({reducerPath:Y,baseQuery:Object(V.d)({baseUrl:"https://552vv7k0hf.execute-api.us-east-1.amazonaws.com/dev"}),endpoints:function(e){return{ping:e.query({query:function(){return"ping"},transformResponse:X}),matrix:e.query({query:function(){return"matrix"},transformResponse:X}),pools:e.query({query:function(e){var t="pools";"object"===typeof e&&(Array.isArray(e.protocolId)&&(e=Object.assign({},e,{protocolId:e.protocolId.join(",")})),t+="?"+new URLSearchParams(e).toString());return t},transformResponse:X})}}}),$=Z.reducer,_=Z.middleware,ee=(Z.usePingQuery,Z.useMatrixQuery),te=Z.useLazyPoolsQuery,ne={pageIndex:0,pageSize:15,apyAsc:!1},ae=function(){var e=function(){var e=ee(void 0).data||{},t=e.chains,n=e.tags,o=e.protocols,i=Object(a.useState)(ne),r=Object(c.a)(i,2),l=r[0],s=r[1],d=Object(a.useCallback)((function(e){s((function(t){var n=Object.assign({},t,e);return n=Object.fromEntries(Object.entries(n).filter((function(e){var t=Object(c.a)(e,2)[1];return!("undefined"===typeof t||"string"===typeof t&&!t)}))),console.log("state: ",n),n}))}),[s]),u=te(),g=Object(c.a)(u,2),h=g[0],j=g[1],b=j.data,p=j.isFetching;Object(a.useEffect)((function(){h(l)}),[l]);var f=Object(a.useState)(""),O=Object(c.a)(f,2),m=O[0],x=O[1],v=Object(a.useCallback)((function(e){x(e),d({chainId:e,protocolId:""})}),[x,d]),C=Object(a.useMemo)((function(){return(o||[]).reduce((function(e,t){var n;return null===(n=t.chainIds)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[o]),S=Object(a.useMemo)((function(){var e=o||[];if(m){var t=C[m];t&&(e=e.filter((function(e){return t.has(e.id)})))}var a=e.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{}),i=new Set(Object.keys(a));return[e,(n||[]).filter((function(e){return i.has(e.id)})),a]}),[m,C,o,n]),y=Object(c.a)(S,3),I=y[0],w=y[1],k=y[2],P=Object(a.useCallback)((function(e,t){if("tag"===e){var n=Array.from(k[t]||[]);d({protocolId:n})}else"protocol"===e&&d({protocolId:t})}),[d,k]),M=Object(a.useCallback)((function(e,t){console.log("sortType: ",e,", val: ",t);var n=void 0,a=void 0;"apy"===e?n="asc"===t:"tvl"===e&&(a="asc"===t),d({apyAsc:n,tvlAsc:a})}),[d]),F=Object(a.useCallback)((function(e){d({pageIndex:e})}),[d]),D=Object(a.useCallback)((function(e){d({pageSize:e})}),[d]);return console.log("poolsArg: ",l),{selectedChainId:m,chains:t||[],tokens:[],tags:w,protocols:I,isFetchingPools:p,poolsResult:b,onChainChanged:v,onFilterChanged:P,onSortChanged:M,pageIndex:(null===l||void 0===l?void 0:l.pageIndex)||0,pageSize:(null===l||void 0===l?void 0:l.pageSize)||25,onPageSizeChanged:D,onPageIndexChanged:F}}(),t=e.selectedChainId,n=e.chains,o=e.tokens,i=e.tags,r=e.protocols,s=e.isFetchingPools,d=e.poolsResult,u=e.onChainChanged,g=e.onFilterChanged,h=e.onSortChanged,j=e.pageIndex,b=e.pageSize,p=e.onPageSizeChanged,f=e.onPageIndexChanged;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(k,{selectedChainId:t,chains:n||[],onChainChanged:u}),Object(x.jsx)(l.a,{marginTop:16}),Object(x.jsx)(U,{selectedChainId:t,tokens:o,tags:i,protocols:r,isFetchingPools:s,poolsResult:d,onFilterChanged:g,onSortChanged:h,pageIndex:j,pageSize:b,onPageIndexChange:f,onPageSizeChanged:p})]})};var oe=function(){return Object(x.jsx)(ae,{})},ie=n(35),re=n(130),ce=n(238),le=n(233),se=n(14),de=Object(se.a)({reducer:Object(j.a)({},Y,$),middleware:function(e){return[].concat(Object(s.a)(e()),[_])}});Object(V.e)(de.dispatch);var ue=Object(re.a)({palette:{mode:"dark",primary:{main:"#1890FF"}}});r.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(ie.a,{store:de,children:Object(x.jsxs)(ce.a,{theme:ue,children:[Object(x.jsx)(le.a,{}),Object(x.jsx)(oe,{})]})})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.d2f9dd7a.chunk.js.map