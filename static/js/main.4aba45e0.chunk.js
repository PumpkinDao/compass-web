(this["webpackJsonpcompass-web"]=this["webpackJsonpcompass-web"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(42),i=n.n(r),c=n(8),l=n(185),s=n(16),u=n(239),d=n(240),h=n(235),b=n(241),j=n(3),g=n(5),p=n(229),f=n(30),O=n(25),m=n(54),x=n(125),v=n.n(x),C=n(2),S=Object(g.a)(p.a)((function(e){var t,n=e.theme;return t={flexDirection:"row",borderRadius:50,backgroundColor:Object(f.a)(n.palette.common.white,.15),"&:hover":{backgroundColor:Object(f.a)(n.palette.common.white,.25)},marginLeft:0,width:"100%"},Object(j.a)(t,n.breakpoints.up("sm"),{marginLeft:n.spacing(1),width:"auto"}),Object(j.a)(t,"& .MuiButtonBase-root",{opacity:.5}),Object(j.a)(t,"&:hover .MuiButtonBase-root, &.Mui-focused .MuiButtonBase-root",{opacity:1}),t})),y=Object(g.a)(O.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(j.a)({padding:t.spacing(1,0,1,2),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),I=function(e){var t=e.placeholder,n=e.onSearchSubmit,o=Object(a.useState)(""),r=Object(c.a)(o,2),i=r[0],l=r[1],s=Object(a.useCallback)((function(){return n(i)}),[i,n]);return Object(C.jsxs)(S,{children:[Object(C.jsx)(y,{placeholder:t,value:i,onChange:function(e){return l(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&s()}}),Object(C.jsx)(m.a,{onClick:s,children:Object(C.jsx)(v.a,{})})]})},k=n(126),w=n.n(k),M=function(e){var t=e.selectedChainId,n=e.chains,a=e.onChainChanged,o=e.onSearchSubmit,r=[{id:"all",name:"All"}].concat(Object(s.a)(n));return Object(C.jsx)(l.a,{sx:{flexGrow:1},children:Object(C.jsx)(u.a,{position:"static",color:"transparent",sx:{boxShadow:"revert"},children:Object(C.jsxs)(d.a,{children:[Object(C.jsx)(w.a,{sx:{fontSize:50}}),Object(C.jsx)(l.a,{marginLeft:16}),Array.isArray(r)&&r.length>1?Object(C.jsx)(h.a,{variant:"fullWidth",value:t||"all",onChange:function(e,t){return a("all"===t?"":t)},children:r.map((function(e){return Object(C.jsx)(b.a,{label:e.name,value:e.id},e.id)}))}):null,Object(C.jsx)(l.a,{flexGrow:1}),Object(C.jsx)(I,{placeholder:"Search...",onSearchSubmit:o}),Object(C.jsx)(l.a,{marginRight:8})]})})})},P=n(242),F=n(236),D=n(243),z=n(83),G=n(107),R=n(95),A=n(41),B=n(246),H=n(106),L=function(e){var t=e.onFilterChanged,n=Object(a.useState)("all"),o=Object(c.a)(n,2),r=o[0],i=o[1],l=Object(a.useCallback)((function(e){i(e),t("singleTokenPool",String("single"===e))}),[i]);return Object(C.jsxs)(F.a,{exclusive:!0,value:r,onChange:function(e,t){return l(t)},children:[Object(C.jsx)(D.a,{value:"all",children:"All"}),Object(C.jsx)(D.a,{value:"single",children:"Single Token"}),Object(C.jsx)(D.a,{value:"multi",children:"Multi Token"})]})},T=function(e){var t=e.label,n=e.items,o=e.onItemSelected,r="placeholder";n=[{id:r,name:t}].concat(Object(s.a)(n));var i=Object(a.useState)(""),l=Object(c.a)(i,2),u=l[0],d=l[1],h=Object(a.useCallback)((function(e){d(e=e===r?"":e),o(e)}),[d,o]);return Object(C.jsxs)(z.a,{children:[Object(C.jsx)(G.a,{children:t}),Object(C.jsx)(R.a,{value:u,label:t,onChange:function(e){return h(e.target.value)},sx:{minWidth:120},children:n.map((function(e){return Object(C.jsx)(A.a,{value:e.id,sx:{fontStyle:e.id===r?"italic":"inherit"},children:e.name},e.id)}))})]})},E=function(e){var t=e.tokens,n=e.tags,o=e.protocols,r=e.onFilterChanged,i=Object(a.useState)(""),l=Object(c.a)(i,2),s=l[0],u=l[1],d=Object(a.useMemo)((function(){return o.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[o]),h=Object(a.useMemo)((function(){if(s&&o){var e=d[s];return o.filter((function(t){return e.has(t.id)}))}return o}),[s,d,o]);return Object(C.jsxs)(p.a,{direction:"row",spacing:2,children:[Object(C.jsx)(T,{label:"Token",items:t,onItemSelected:function(e){return r("token",e)}}),Object(C.jsx)(T,{label:"Category",items:n,onItemSelected:function(e){u(e),r("tag",e)}}),Object(C.jsx)(T,{label:"Protocol",items:h,onItemSelected:function(e){return r("protocol",e)}},"Protocols<".concat(s,">"))]})},N=function(e){var t=e.tokens,n=e.tags,a=e.protocols,o=e.onFilterChanged;return Object(C.jsxs)(p.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(C.jsx)(L,{onFilterChanged:o}),Object(C.jsx)(E,{tokens:t,tags:n,protocols:a,onFilterChanged:o})]})},q=[{field:"id",hide:!0},{field:"pool",headerName:"POOL",flex:3,sortable:!1},{field:"apy",headerName:"APY",flex:2,headerAlign:"right",align:"right",cellClassName:"StyledDataGrid-cell-apy"},{field:"tvl",headerName:"TVL",flex:2,type:"number"},{field:"link",headerName:"LINK",flex:3,sortable:!1,headerAlign:"right",align:"right"}],Q=function(){return Object(C.jsx)(H.b,{children:Object(C.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},children:Object(C.jsx)(B.a,{})})})},W=Object(g.a)(H.a)((function(){return{minHeight:600,border:"revert","& .MuiDataGrid-cell, & .MuiDataGrid-columnHeaders":{border:"revert"},"& .MuiDataGrid-cell:focus, & .MuiDataGrid-columnHeader:focus, .MuiDataGrid-columnHeader:focus-within":{outline:"revert"},"& .MuiDataGrid-columnSeparator":{display:"none"},"& .MuiDataGrid-columnHeader--alignRight .MuiDataGrid-columnHeaderTitleContainer":{flexDirection:"row",justifyContent:"flex-end"},"& .MuiDataGrid-columnHeader .MuiDataGrid-iconButtonContainer, & .MuiDataGrid-columnHeader--sorted .MuiDataGrid-iconButtonContainer":{width:"auto",visibility:"visible"},"& .MuiDataGrid-columnHeader:not(.MuiDataGrid-columnHeader--sorted) .MuiDataGrid-sortIcon":{opacity:"0.1"},"& .StyledDataGrid-cell-apy":{color:"#56F00DD9"}}})),J=function(e){var t=e.pageIndex,n=e.pageSize,o=e.onPageSizeChanged,r=e.onPageIndexChange,i=e.isFetchingPools,l=e.poolsResult,s=e.onSortChanged,u=Object(a.useMemo)((function(){return((null===l||void 0===l?void 0:l.data)||[]).map((function(e){return{id:"".concat(e.protocolId,"/").concat(e.chainId,"/").concat(e.name),pool:e.name,tvl:e.tvl,apy:"".concat((100*Number(e.apy)).toFixed(2),"%"),link:e.protocolId}}))}),[l]);return Object(C.jsx)(W,{autoHeight:!0,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,disableDensitySelector:!0,disableSelectionOnClick:!0,showCellRightBorder:!1,showColumnRightBorder:!1,components:{LoadingOverlay:Q},sortingMode:"server",onSortModelChange:function(e){var t=Object(c.a)(e,1)[0];return s((null===t||void 0===t?void 0:t.field)||"","string"===typeof(null===t||void 0===t?void 0:t.sort)?t.sort:"")},pagination:!0,paginationMode:"server",page:t,onPageChange:function(e){return r(e)},pageSize:n,onPageSizeChange:o,rowsPerPageOptions:[15,35,50],rowCount:(null===l||void 0===l?void 0:l.total)||0,initialState:{sorting:{sortModel:[{field:"apy",sort:"desc"}]}},loading:i,columns:q,rows:u})},K=function(e){var t=e.selectedChainId,n=e.tokens,a=e.tags,o=e.protocols,r=e.onFilterChanged,i=e.onSortChanged,c=e.isFetchingPools,s=e.poolsResult,u=e.pageIndex,d=e.pageSize,h=e.onPageSizeChanged,b=e.onPageIndexChange;return Object(C.jsxs)(P.a,{maxWidth:"lg",children:[Object(C.jsx)(N,{tokens:n,tags:a,protocols:o,onFilterChanged:r},"filter-".concat(t)),Object(C.jsx)(l.a,{marginTop:8}),Object(C.jsx)(J,{pageIndex:u,pageSize:d,onPageSizeChanged:h,onPageIndexChange:b,isFetchingPools:c,poolsResult:s,onSortChanged:i})]})},U=n(128),V=n(33),Y="pumpkinApi",X=function(e){return e.result},Z=Object(U.a)({reducerPath:Y,baseQuery:Object(V.d)({baseUrl:"https://552vv7k0hf.execute-api.us-east-1.amazonaws.com/dev"}),endpoints:function(e){return{ping:e.query({query:function(){return"ping"},transformResponse:X}),matrix:e.query({query:function(){return"matrix"},transformResponse:X}),pools:e.query({query:function(e){var t="pools";"object"===typeof e&&(Array.isArray(e.protocolId)&&(e=Object.assign({},e,{protocolId:e.protocolId.join(",")})),t+="?"+new URLSearchParams(e).toString());return t},transformResponse:X})}}}),$=Z.reducer,_=Z.middleware,ee=(Z.usePingQuery,Z.useMatrixQuery),te=Z.useLazyPoolsQuery,ne={pageIndex:0,pageSize:15,apyAsc:!1},ae=function(){var e=function(){var e=ee(void 0).data||{},t=e.chains,n=e.tags,o=e.protocols,r=Object(a.useState)(ne),i=Object(c.a)(r,2),l=i[0],s=i[1],u=Object(a.useCallback)((function(e){s((function(t){var n=Object.assign({},t,e);return Object.fromEntries(Object.entries(n).filter((function(e){var t=Object(c.a)(e,2)[1];return!("undefined"===typeof t||"string"===typeof t&&!t)})))}))}),[s]),d=te(),h=Object(c.a)(d,2),b=h[0],j=h[1],g=j.data,p=j.isFetching;Object(a.useEffect)((function(){b(l)}),[l]);var f=Object(a.useState)(""),O=Object(c.a)(f,2),m=O[0],x=O[1],v=Object(a.useCallback)((function(e){x(e),u({chainId:e,protocolId:""})}),[x,u]),C=Object(a.useMemo)((function(){return(o||[]).reduce((function(e,t){var n;return null===(n=t.chainIds)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{})}),[o]),S=Object(a.useMemo)((function(){var e=o||[];if(m){var t=C[m];t&&(e=e.filter((function(e){return t.has(e.id)})))}var a=e.reduce((function(e,t){var n;return null===(n=t.tags)||void 0===n||n.forEach((function(n){e[n]||(e[n]=new Set),e[n].add(t.id)})),e}),{}),r=new Set(Object.keys(a));return[e,(n||[]).filter((function(e){return r.has(e.id)})),a]}),[m,C,o,n]),y=Object(c.a)(S,3),I=y[0],k=y[1],w=y[2],M=Object(a.useCallback)((function(e,t){if("tag"===e){var n=Array.from(w[t]||[]);u({protocolId:n})}else"protocol"===e&&u({protocolId:t})}),[u,w]),P=Object(a.useCallback)((function(e,t){var n=void 0,a=void 0;"apy"===e?n="asc"===t:"tvl"===e&&(a="asc"===t),u({apyAsc:n,tvlAsc:a})}),[u]),F=Object(a.useCallback)((function(e){u({pageIndex:e})}),[u]),D=Object(a.useCallback)((function(e){u({pageSize:e})}),[u]),z=Object(a.useCallback)((function(e){e=(e=e||"").toLowerCase(),u({protocolId:e})}),[u]);return{selectedChainId:m,chains:t||[],tokens:[],tags:k,protocols:I,isFetchingPools:p,poolsResult:g,onChainChanged:v,onFilterChanged:M,onSortChanged:P,pageIndex:(null===l||void 0===l?void 0:l.pageIndex)||0,pageSize:(null===l||void 0===l?void 0:l.pageSize)||25,onPageSizeChanged:D,onPageIndexChanged:F,onSearchSubmit:z}}(),t=e.selectedChainId,n=e.chains,o=e.tokens,r=e.tags,i=e.protocols,s=e.isFetchingPools,u=e.poolsResult,d=e.onChainChanged,h=e.onFilterChanged,b=e.onSortChanged,j=e.pageIndex,g=e.pageSize,p=e.onPageSizeChanged,f=e.onPageIndexChanged,O=e.onSearchSubmit;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M,{selectedChainId:t,chains:n||[],onChainChanged:d,onSearchSubmit:O}),Object(C.jsx)(l.a,{marginTop:16}),Object(C.jsx)(K,{selectedChainId:t,tokens:o,tags:r,protocols:i,isFetchingPools:s,poolsResult:u,onFilterChanged:h,onSortChanged:b,pageIndex:j,pageSize:g,onPageIndexChange:f,onPageSizeChanged:p})]})};var oe=function(){return Object(C.jsx)(ae,{})},re=n(35),ie=n(130),ce=n(238),le=n(233),se=n(14),ue=Object(se.a)({reducer:Object(j.a)({},Y,$),middleware:function(e){return[].concat(Object(s.a)(e()),[_])}});Object(V.e)(ue.dispatch);var de=Object(ie.a)({palette:{mode:"dark",primary:{main:"#1890FF"}}});i.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(re.a,{store:ue,children:Object(C.jsxs)(ce.a,{theme:de,children:[Object(C.jsx)(le.a,{}),Object(C.jsx)(oe,{})]})})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.4aba45e0.chunk.js.map